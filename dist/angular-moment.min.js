//!  Angular Moment.js v0.2.8
//!  https://github.com/shaungrady/angular-momentjs
//!  (c) 2014 Shaun Grady
//!  License: MIT
"use strict";angular.module("moment",[]),angular.module("moment").constant("indexOf",function(t,e){if(t.indexOf)return t.indexOf(e);for(var a=0;a<t.length;a++)if(e===t[a])return a;return-1}),angular.module("moment").provider("$moment",function(){function t(t){return t=t||"",t.match(/l/i)?moment().lang()._longDateFormat[t]||t:t}var e={$strictView:!0,$strictModel:!0,$defaultViewFormat:"L",$defaultModelFormat:moment.defaultFormat,$parseFormat:t};this.defaultViewFormat=function(t){return angular.isString(t)&&(e.$defaultViewFormat=t),this},this.defaultModelFormat=function(t){return angular.isString(t)&&(e.$defaultModelFormat=t),this},this.strictView=function(t){return"boolean"==typeof t&&(e.$strictView=t),this},this.strictModel=function(t){return"boolean"==typeof t&&(e.$strictModel=t),this},this.$get=function(){if(angular.isDefined(moment.$strictView))return moment;try{Object.defineProperty(moment,"$strictView",{value:e.$strictView}),Object.defineProperty(moment,"$strictModel",{value:e.$strictModel}),Object.defineProperty(moment,"$defaultViewFormat",{value:e.$defaultViewFormat}),Object.defineProperty(moment,"$defaultModelFormat",{value:e.$defaultModelFormat}),Object.defineProperty(moment,"$parseFormat",{value:e.$parseFormat})}catch(t){angular.extend(moment,e)}return moment}}),angular.module("moment").filter("momentFormat",["$moment",function(t){return function(e,a){var i,r,n,o=t.$defaultViewFormat;return angular.isDefined(e)?(angular.isString(a)?o=a:angular.isArray(a)&&(n=a[0],o=a[1]||o,r=a[2]),i=t(e,n,r),i.isValid()?i.format(o):!angular.isDefined(n)&&(i=t(e,t.$defaultModelFormat,t.strictModel),i.isValid())?i.format(o):e):e}}]),angular.module("moment").directive("input",["$moment","$timeout","indexOf",function(t,e,a){var i=["millisecond","second","minute","hour","day","month","year"],r=t.$strictView,n=t.$strictModel;return{priority:10,restrict:"E",require:"?ngModel",compile:function(o,m){return"date"!==m.type&&"moment"!==m.type?angular.noop:function(o,m,l,u){if(u){var d,f,s,c=t.$defaultViewFormat,$=t.$defaultModelFormat,v=!1,w={min:{attr:null,view:null,model:null},max:{attr:null,view:null,model:null}},y=function(e){m.attr("placeholder",t.$parseFormat(e))},p=function(){var t=!u.$isEmpty(u.$modelValue),e=!u.$isEmpty(u.$viewValue);t?x():e&&g()},g=function(){u.$isEmpty(u.$viewValue)||u.$setViewValue(u.$viewValue)},x=function(){var t=u.$modelValue;u.$isEmpty(t)||e(function(){o.$apply(function(){o[l.ngModel]=t+" "}),o.$apply(function(){o[l.ngModel]=t})},0,!1)},V=function(e){w[e].attr&&w[e].attr.isValid()?(w[e].view=t(w[e].attr.format(c),c),w[e].model=t(w[e].attr.format($),$)):w[e].attr=w[e].view=w[e].model=null},h=function(e,a){var i,o,m,f,s,v;return"view"==e?(f=c,s=$,v=r):(f=$,s=c,v=n),i=t(a,f,v),o=i.isValid(),m=u.$isEmpty(a),d=m?t(null):i.clone(),m||o?(u.$setValidity("date",!0),l.min&&(!m&&o&&w.min.attr&&i.isBefore(w.min[e])?u.$setValidity("min",!1):u.$setValidity("min",!0)),l.max&&(!m&&o&&w.max.attr&&i.isAfter(w.max[e])?u.$setValidity("max",!1):u.$setValidity("max",!0)),u.$error.min||u.$error.max?void 0:m?a:i.format(s)):(u.$setValidity("date",!1),l.min&&u.$setValidity("min",!0),void(l.max&&u.$setValidity("max",!0)))};if(u.$parsers.push(angular.bind(void 0,h,"view")),u.$formatters.push(angular.bind(void 0,h,"model")),!l.format||l.viewFormat&&l.modelFormat||(c=o.$eval(l.format)||c,$=o.$eval(l.format)||$,o.$watch(l.format,function(t){c=t,$=t,y(t),V("min"),V("max"),g()})),l.viewFormat&&(c=o.$eval(l.viewFormat)||c,o.$watch(l.viewFormat,function(e){e=e||t.$defaultViewFormat,e!==c&&(c=e,y(e),V("min"),V("max"),x())})),l.modelFormat&&($=o.$eval(l.modelFormat)||$,o.$watch(l.modelFormat,function(e){e=e||t.$defaultModelFormat,e!==$&&($=e,V("min"),V("max"),g())})),y(c),l.min){var F=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!w.min.attr||a&&w.min.attr&&a.format("X")!==w.min.attr.format("X"))&&(w.min.attr=a,V("min"),p())};F(o.$eval(l.min)),o.$watch(l.min,F,!0)}if(l.max){var M=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!w.max.attr||a&&w.max.attr&&a.format("X")!==w.max.attr.format("X"))&&(w.max.attr=a,V("max"),p())};M(o.$eval(l.max)),o.$watch(l.max,M,!0)}f="day",s=1,l.step&&o.$watch(l.step,function(t){if(t&&angular.isString(t)){var e=t.match(/(\d+)\s(\w+)/);e?(f=e[2],s=parseInt(e[1],10)):(f="day",s=1)}});var b=function(e,r){if(!e.type&&r&&r.type&&(angular.extend(e,r),v=!0),v&&("keydown"!=e.type||/38|40/.test(e.which))){e.preventDefault();var n,m,l,$,y,p=u.$isEmpty(u.$viewValue),g=p?t():t(d.format(c),c,!0);g.isValid()&&("keydown"==e.type?m=/38/.test(e.which):(n=e.originalEvent?e.originalEvent.wheelDelta:e.wheelDelta,m=n/120>0),l=e.shiftKey?i[a(i,f.replace(/s$/,""))+1]||f:f,p&&w.min.attr?$=w.min.view.clone():m?p&&!w.min.attr?$=g.max(w.max.attr?w.max.view:void 0):w.min.attr&&g.isBefore(w.min.view)?$=w.min.view.clone():w.max.attr&&!g.isAfter(w.max.view)?$=g.add(l,s).max(w.max.view):w.max.attr||($=g.add(l,s)):p&&!w.max.attr?$=g.min(w.min.attr?w.min.view:void 0):w.max.attr&&g.isAfter(w.max.view)?$=w.max.view.clone():w.min.attr&&!g.isBefore(w.min.view)?$=g.subtract(l,s).min(w.min.view):w.min.attr||($=g.subtract(l,s)),y=($||g).format(c),o.$apply(function(){u.$setViewValue(y),u.$render()}))}};m.on("mousewheel keydown",b),m.on("focus",function(){v=!0}),m.on("blur",function(){v=!1})}}}}}]);