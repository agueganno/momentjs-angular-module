//!  Angular Moment.js v0.2.8
//!  https://github.com/shaungrady/angular-momentjs
//!  (c) 2014 Shaun Grady
//!  License: MIT
"use strict";angular.module("moment",[]),angular.module("moment").constant("indexOf",function(t,e){if(t.indexOf)return t.indexOf(e);for(var a=0;a<t.length;a++)if(e===t[a])return a;return-1}),angular.module("moment").provider("$moment",function(){function t(t){return t=t||"",t.match(/l/i)?moment().lang()._longDateFormat[t]||t:t}var e={$strictView:!0,$strictModel:!0,$defaultViewFormat:"L",$defaultModelFormat:moment.defaultFormat,$parseFormat:t};this.defaultViewFormat=function(t){return angular.isString(t)&&(e.$defaultViewFormat=t),this},this.defaultModelFormat=function(t){return angular.isString(t)&&(e.$defaultModelFormat=t),this},this.strictView=function(t){return"boolean"==typeof t&&(e.$strictView=t),this},this.strictModel=function(t){return"boolean"==typeof t&&(e.$strictModel=t),this},this.$get=function(){if(angular.isDefined(moment.$strictView))return moment;try{Object.defineProperty(moment,"$strictView",{value:e.$strictView}),Object.defineProperty(moment,"$strictModel",{value:e.$strictModel}),Object.defineProperty(moment,"$defaultViewFormat",{value:e.$defaultViewFormat}),Object.defineProperty(moment,"$defaultModelFormat",{value:e.$defaultModelFormat}),Object.defineProperty(moment,"$parseFormat",{value:e.$parseFormat})}catch(t){angular.extend(moment,e)}return moment}}),angular.module("moment").filter("momentFormat",["$moment",function(t){return function(e,a){var n,i,r,o=t.$defaultViewFormat;return angular.isDefined(e)?(angular.isString(a)?o=a:angular.isArray(a)&&(r=a[0],o=a[1]||o,i=a[2]),n=t(e,r,i),n.isValid()?n.format(o):!angular.isDefined(r)&&(n=t(e,t.$defaultModelFormat,t.strictModel),n.isValid())?n.format(o):e):e}}]),angular.module("moment").directive("input",["$moment","$timeout","indexOf",function(t,e,a){var n=["millisecond","second","minute","hour","day","month","year"],i=t.$strictView,r=t.$strictModel;return{priority:10,restrict:"E",require:"?ngModel",compile:function(o,m){return"date"!==m.type&&"moment"!==m.type?angular.noop:function(o,m,l,u){if(u){var d,f,s,c=t.$defaultViewFormat,$=t.$defaultModelFormat,v=!1,w={min:{attr:null,view:null,model:null},max:{attr:null,view:null,model:null}},p=function(e){m.attr("placeholder",t.$parseFormat(e))},y=function(){var t=!u.$isEmpty(u.$modelValue),e=!u.$isEmpty(u.$viewValue);t?M():e&&h()},h=function(){u.$isEmpty(u.$viewValue)||u.$setViewValue(u.$viewValue)},M=function(){var t=u.$modelValue;u.$isEmpty(t)||e(function(){o.$apply(function(){o[l.ngModel]=t+" "}),o.$apply(function(){o[l.ngModel]=t})},0,!1)},g=function(e){w[e].attr&&w[e].attr.isValid()?(w[e].view=t(w[e].attr.format(c),c),w[e].model=t(w[e].attr.format($),$)):w[e].attr=w[e].view=w[e].model=null},x=function(e,a){var n,o,m,f,s,v;return"view"==e?(f=c,s=$,v=i):(f=$,s=c,v=r),n=t(a,f,v),o=n.isValid(),m=u.$isEmpty(a),d=m?t(null):n.clone(),m||o?(u.$setValidity("date",!0),l.min&&(!m&&o&&w.min.attr&&n.isBefore(w.min[e])?u.$setValidity("min",!1):u.$setValidity("min",!0)),l.max&&(!m&&o&&w.max.attr&&n.isAfter(w.max[e])?u.$setValidity("max",!1):u.$setValidity("max",!0)),u.$error.min||u.$error.max?void 0:m?a:n.format(s)):(u.$setValidity("date",!1),l.min&&u.$setValidity("min",!0),void(l.max&&u.$setValidity("max",!0)))};if(u.$parsers.push(angular.bind(void 0,x,"view")),u.$formatters.push(angular.bind(void 0,x,"model")),!l.format||l.viewFormat&&l.modelFormat||(c=o.$eval(l.format)||c,$=o.$eval(l.format)||$,o.$watch(l.format,function(t){c=t,$=t,p(t),g("min"),g("max"),h()})),l.viewFormat&&(c=o.$eval(l.viewFormat)||c,o.$watch(l.viewFormat,function(e){e=e||t.$defaultViewFormat,e!==c&&(c=e,p(e),g("min"),g("max"),M())})),l.modelFormat&&($=o.$eval(l.modelFormat)||$,o.$watch(l.modelFormat,function(e){e=e||t.$defaultModelFormat,e!==$&&($=e,g("min"),g("max"),h())})),p(c),l.min){var V=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!w.min.attr||a&&w.min.attr&&a.format("X")!==w.min.attr.format("X"))&&(w.min.attr=a,g("min"),y())};V(o.$eval(l.min)),o.$watch(l.min,V,!0)}if(l.max){var F=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!w.max.attr||a&&w.max.attr&&a.format("X")!==w.max.attr.format("X"))&&(w.max.attr=a,g("max"),y())};F(o.$eval(l.max)),o.$watch(l.max,F,!0)}f="day",s=1,l.step&&o.$watch(l.step,function(t){if(t&&angular.isString(t)){var e=t.match(/(\d+)\s(\w+)/);e?(f=e[2],s=parseInt(e[1],10)):(f="day",s=1)}});var O=function(e,i){if(!e.type&&i&&i.type&&(angular.extend(e,i),v=!0),v&&("keydown"!=e.type||/38|40/.test(e.which))){e.preventDefault();var r,m,l,$,p,y=u.$isEmpty(u.$viewValue),h=y?t():t(d.format(c),c,!0);h.isValid()&&("keydown"==e.type?m=/38/.test(e.which):(r=e.originalEvent?e.originalEvent.wheelDelta:e.wheelDelta,m=r/120>0),l=e.shiftKey?n[a(n,f.replace(/s$/,""))+1]||f:f,y&&w.min.attr?$=w.min.view.clone():m?y&&!w.min.attr?$=h.max(w.max.attr?w.max.view:void 0):w.min.attr&&h.isBefore(w.min.view)?$=w.min.view.clone():w.max.attr&&!h.isAfter(w.max.view)?$=h.add(l,s).max(w.max.view):w.max.attr||($=h.add(l,s)):y&&!w.max.attr?$=h.min(w.min.attr?w.min.view:void 0):w.max.attr&&h.isAfter(w.max.view)?$=w.max.view.clone():w.min.attr&&!h.isBefore(w.min.view)?$=h.subtract(l,s).min(w.min.view):w.min.attr||($=h.subtract(l,s)),p=($||h).format(c),o.$apply(function(){u.$setViewValue(p),u.$render()}))}};m.on("mousewheel keydown",O),m.on("focus",function(){v=!0}),m.on("blur",function(){v=!1})}}}}}]),angular.module("moment").directive("momentDatepicker",["$moment",function(t){var e=t().startOf("week").format("d"),a=t().endOf("week").format("d");return{restrict:"A",templateUrl:"datepicker.template.html",scope:{date:"=momentDatepicker"},link:function(n){function i(){n.today=t(),n.lastMonthMoments=[],n.thisMonthMoments=[],n.nextMonthMoments=[];for(var i=n.displayMoment.clone().startOf("month"),r=i.clone(),o=n.displayMoment.clone().endOf("month"),m=n.displayMoment.format("M");i.format("d")!==e;)n.lastMonthMoments.push(i.subtract(1,"day").clone());for(;r.format("M")===m;)n.thisMonthMoments.push(r.clone()),r.add(1,"day");for(;o.format("d")!==a;)n.nextMonthMoments.push(o.add(1,"day").clone())}n.weekMoments=[];for(var r=7;r--;)n.weekMoments.unshift(t().startOf("week").add(r,"day"));n.$watch("date",function(e){var a=t(e,t.$defaultModelFormat,t.$strictModel);n.moment=e&&a.isValid()?a.clone():t(),n.displayMoment=n.moment.clone()}),n.$watch(function(){return n.displayMoment.format("M/YYYY")},function(){i()}),n.setDateTo=function(e){n.date=e.format(t.$defaultModelFormat)}}}}]);