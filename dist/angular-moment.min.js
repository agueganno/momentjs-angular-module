/*!
  Angular Moment.js v0.2.2
  https://github.com/shaungrady/angular-momentjs
  (c) 2014 Shaun Grady
  License: MIT
*/
"use strict";angular.module("moment",[]),angular.module("moment").constant("indexOf",function(t,e){if(t.indexOf)return t.indexOf(e);for(var a=0;a<t.length;a++)if(e===t[a])return a;return-1}),angular.module("moment").provider("$moment",function(){function t(t){return t=t||"",t.match(/l/i)?moment().lang()._longDateFormat[t]||t:t}var e={$strictView:!0,$strictModel:!0,$defaultViewFormat:"L",$defaultModelFormat:moment.defaultFormat,$parseFormat:t};this.defaultViewFormat=function(t){return angular.isString(t)&&(e.$defaultViewFormat=t),this},this.defaultModelFormat=function(t){return angular.isString(t)&&(e.$defaultModelFormat=t),this},this.strictView=function(t){return"boolean"==typeof t&&(e.$strictView=t),this},this.strictModel=function(t){return"boolean"==typeof t&&(e.$strictModel=t),this},this.$get=function(){if(angular.isDefined(moment.$strictView))return moment;try{Object.defineProperty(moment,"$strictView",{value:e.$strictView}),Object.defineProperty(moment,"$strictModel",{value:e.$strictModel}),Object.defineProperty(moment,"$defaultViewFormat",{value:e.$defaultViewFormat}),Object.defineProperty(moment,"$defaultModelFormat",{value:e.$defaultModelFormat}),Object.defineProperty(moment,"$parseFormat",{value:e.$parseFormat})}catch(t){angular.extend(moment,e)}return moment}}),angular.module("moment").directive("input",["$moment","$timeout","indexOf",function(t,e,a){var i=["millisecond","second","minute","hour","day","month","year"];return{priority:10,restrict:"E",require:"?ngModel",compile:function(r,n){return"date"!==n.type&&"moment"!==n.type?angular.noop:function(r,n,o,l){if(l){var u,m,s,d,f,$,c,p,v=t.$defaultViewFormat,y=t.$defaultModelFormat,w=function(e){n.attr("placeholder",t.$parseFormat(e))},V=function(){l.$isEmpty(l.$viewValue)||l.$setViewValue(l.$viewValue)},h=function(){var t=l.$modelValue;l.$isEmpty(t)||e(function(){r.$apply(function(){r[o.ngModel]=t+" "}),r.$apply(function(){r[o.ngModel]=t})},0,!1)},g=function(){u&&u.isValid()?(m=t(u.format(v),v),s=t(u.format(y),y)):m=s=null},F=function(){d&&d.isValid()?(f=t(d.format(v),v),$=t(d.format(y),y)):f=$=null},M=function(e,a,i,r){var n=t(r,a,e),o=l.$isEmpty(r);return o||n.isValid()?(l.$setValidity("date",!0),o?r:n.format(i)):void l.$setValidity("date",!1)},x=function(e){return M(t.$strictView,v,y,e)},E=function(e){return M(t.$strictModel,y,v,e)};if(l.$formatters.push(E),!o.format||o.viewFormat&&o.modelFormat||(v=r.$eval(o.format)||v,y=r.$eval(o.format)||y,r.$watch(o.format,function(t){v=t,y=t,w(t),g(),F(),V()})),o.viewFormat&&(v=r.$eval(o.viewFormat)||v,r.$watch(o.viewFormat,function(e){e=e||t.$defaultViewFormat,e!==v&&(v=e,w(e),g(),F(),h())})),o.modelFormat&&(y=r.$eval(o.modelFormat)||y,r.$watch(o.modelFormat,function(e){e=e||t.$defaultModelFormat,e!==y&&(y=e,g(),F(),V())})),w(v),o.min){var b=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!u||a&&u&&a.format("X")!==u.format("X"))&&(u=a,g(),V())};r.$watch(o.min,function(e){u=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?t(e,t.$defaultModelFormat):null,g(),V()},!0);var O=function(e){var a=t(e,v,t.$strictView);return!l.$isEmpty(e)&&s&&a.isValid()&&a.isBefore(m)?void l.$setValidity("min",!1):(l.$setValidity("min",!0),e)},A=function(e){var a=t(e,y,t.$strictModel);return!l.$isEmpty(e)&&s&&a.isValid()&&a.isBefore(s)?void l.$setValidity("min",!1):(l.$setValidity("min",!0),e)};b(r.$eval(o.min)),r.$watch(o.min,b,!0),l.$parsers.push(O),l.$formatters.push(A)}if(o.max){var S=function(e){var a;a=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?"today"==e?t():t(e,t.$defaultModelFormat):null,(!a^!d||a&&d&&a.format("X")!==d.format("X"))&&(d=a,F(),V())};r.$watch(o.max,function(e){d=angular.isArray(e)&&2==e.length?t(e[0],e[1]):e&&angular.isString(e)?t(e,t.$defaultModelFormat):null,F(),V()},!0);var j=function(e){var a=t(e,v,t.$strictView);return!l.$isEmpty(e)&&$&&a.isValid()&&a.isAfter(f)?void l.$setValidity("max",!1):(l.$setValidity("max",!0),e)},D=function(e){var a=t(e,y,t.$strictModel);return!l.$isEmpty(e)&&$&&a.isValid()&&a.isAfter($)?void l.$setValidity("max",!1):(l.$setValidity("max",!0),e)};S(r.$eval(o.max)),r.$watch(o.max,S,!0),l.$parsers.push(j),l.$formatters.push(D)}l.$parsers.push(x),c="day",p=1,o.step&&r.$watch(o.step,function(t){if(t&&angular.isString(t)){var e=t.match(/(\d+)\s(\w+)/);e?(c=e[2],p=parseInt(e[1],10)):(c="day",p=1)}});var P=function(e,n){if(!e.type&&n&&n.type&&angular.extend(e,n),"keydown"!=e.type||/38|40/.test(e.which)){e.preventDefault();var o,s,$,y,w,V=l.$isEmpty(l.$viewValue),h=V?t():t(l.$viewValue,v,t.$strictView);h.isValid()&&("keydown"==e.type?s=/38/.test(e.which):(o=e.originalEvent?e.originalEvent.wheelDelta:e.wheelDelta,s=o/120>0),$=e.shiftKey?i[a(i,c.replace(/s$/,""))+1]||c:c,V&&u?y=m.clone():s?V&&!u?y=h.max(d?f:void 0):u&&h.isBefore(m)?y=m.clone():d&&!h.isAfter(f)?y=h.add($,p).max(f):d||(y=h.add($,p)):V&&!d?y=h.min(u?m:void 0):d&&h.isAfter(f)?y=f.clone():u&&!h.isBefore(m)?y=h.subtract($,p).min(m):u||(y=h.subtract($,p)),w=(y||h).format(v),r.$apply(function(){l.$setViewValue(w),l.$render()}))}};n.on("mousewheel keydown",P)}}}}}]);