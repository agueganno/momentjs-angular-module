/*
 Angular Moment.js v0.2.0
 (c) 2014 Shaun Grady https://github.com/shaungrady/angular-momentjs
 License: MIT
*/
"use strict";angular.module("moment",[]).constant("indexOf",function(t,n){if(t.indexOf)return t.indexOf(n);for(var r=0;r<t.length;r++){if(n===t[r])return r}return-1}).provider("$moment",function(){function n(e){e=e||"";if(e.match(/l/i))return moment().lang()._longDateFormat[e]||e;return e}var t={$strictView:true,$strictModel:true,$defaultViewFormat:"L",$defaultModelFormat:moment.defaultFormat,$parseFormat:n};this.defaultViewFormat=function(e){if(angular.isString(e))t.$defaultViewFormat=e;return this};this.defaultModelFormat=function(e){if(angular.isString(e))t.$defaultModelFormat=e;return this};this.strictView=function(e){if(typeof e==="boolean")t.$strictView=e;return this};this.strictModel=function(e){if(typeof e==="boolean")t.$strictModel=e;return this};this.$get=function(){if(angular.isDefined(moment.$strictView))return moment;try{Object.defineProperty(moment,"$strictView",{value:t.$strictView});Object.defineProperty(moment,"$strictModel",{value:t.$strictModel});Object.defineProperty(moment,"$defaultViewFormat",{value:t.$defaultViewFormat});Object.defineProperty(moment,"$defaultModelFormat",{value:t.$defaultModelFormat});Object.defineProperty(moment,"$parseFormat",{value:t.$parseFormat})}catch(e){angular.extend(moment,t)}return moment}}).directive("input",["$moment","$timeout","indexOf",function(t,n,r){var i=["millisecond","second","minute","hour","day","month","year"];return{priority:10,restrict:"E",require:"?ngModel",compile:function(s,o){if(o.type!=="date"&&o.type!=="moment")return angular.noop;return function(s,o,u,a){if(!a)return;var f=function(e){o.attr("placeholder",t.$parseFormat(e))},l=t.$defaultViewFormat,c=t.$defaultModelFormat,h,p,d,v,m,g,y,b;f(l);var w=function(){if(!a.$isEmpty(a.$viewValue))a.$setViewValue(a.$viewValue)};var E=function(){var e=a.$modelValue;if(!a.$isEmpty(e)){n(function(){s.$apply(function(){s[u.ngModel]=e+" "});s.$apply(function(){s[u.ngModel]=e})},0,false)}};var S=function(){if(h&&h.isValid()){p=t(h.format(l),l);d=t(h.format(c),c)}else p=d=null};var x=function(){if(v&&v.isValid()){m=t(v.format(l),l);g=t(v.format(c),c)}else m=g=null};var T=function(e,n,r,i){var s=t(i,n,e),o=a.$isEmpty(i);if(!o&&!s.isValid()){a.$setValidity("date",false);return undefined}else{a.$setValidity("date",true);return o?i:s.format(r)}};var N=function(e){return T(t.$strictView,l,c,e)};var C=function(e){return T(t.$strictModel,c,l,e)};a.$formatters.push(C);if(u.format&&(!u.viewFormat||!u.modelFormat)){s.$watch(u.format,function(t){l=t;c=t;f(t);S();x();w()})}if(u.viewFormat){l=s.$eval(u.viewFormat)||l;s.$watch(u.viewFormat,function(n){n=n||t.$defaultViewFormat;if(n===l)return;l=n;f(n);S();x();E()})}if(u.modelFormat){c=s.$eval(u.modelFormat)||c;s.$watch(u.modelFormat,function(n){n=n||t.$defaultModelFormat;if(n===c)return;c=n;S();x();w()})}if(u.min){var k=function(n){var r;if(angular.isArray(n)&&n.length==2)r=t(n[0],n[1]);else if(n&&angular.isString(n))r=t(n,t.$defaultModelFormat);else r=null;if(!r^!h||r&&h&&r.format("X")!==h.format("X")){h=r;S();w()}};s.$watch(u.min,function(n){if(angular.isArray(n)&&n.length==2)h=t(n[0],n[1]);else if(n&&angular.isString(n))h=t(n,t.$defaultModelFormat);else h=null;S();w()},true);var L=function(e){var n=t(e,l,t.$strictView);if(!a.$isEmpty(e)&&d&&n.isValid()&&n.isBefore(p)){a.$setValidity("min",false);return undefined}else{a.$setValidity("min",true);return e}};var A=function(e){var n=t(e,c,t.$strictModel);if(!a.$isEmpty(e)&&d&&n.isValid()&&n.isBefore(d)){a.$setValidity("min",false);return undefined}else{a.$setValidity("min",true);return e}};k(s.$eval(u.min));s.$watch(u.min,k,true);a.$parsers.push(L);a.$formatters.push(A)}if(u.max){var O=function(n){var r;if(angular.isArray(n)&&n.length==2)r=t(n[0],n[1]);else if(n&&angular.isString(n))r=t(n,t.$defaultModelFormat);else r=null;if(!r^!v||r&&v&&r.format("X")!==v.format("X")){v=r;x();w()}};s.$watch(u.max,function(n){if(angular.isArray(n)&&n.length==2)v=t(n[0],n[1]);else if(n&&angular.isString(n))v=t(n,t.$defaultModelFormat);else v=null;x();w()},true);var M=function(e){var n=t(e,l,t.$strictView);if(!a.$isEmpty(e)&&g&&n.isValid()&&n.isAfter(m)){a.$setValidity("max",false);return undefined}else{a.$setValidity("max",true);return e}};var _=function(e){var n=t(e,c,t.$strictModel);if(!a.$isEmpty(e)&&g&&n.isValid()&&n.isAfter(g)){a.$setValidity("max",false);return undefined}else{a.$setValidity("max",true);return e}};O(s.$eval(u.max));s.$watch(u.max,O,true);a.$parsers.push(M);a.$formatters.push(_)}a.$parsers.push(N);y="day",b=1;if(u.step){s.$watch(u.step,function(t){if(!t||!angular.isString(t))return;var n=t.match(/(\d+)\s(\w+)/);if(n){y=n[2];b=parseInt(n[1],10)}else{y="day";b=1}})}var D=function(e,n){if(!e.type&&n&&n.type)angular.extend(e,n);if(e.type=="keydown"&&!/38|40|107|109/.test(e.which))return;e.preventDefault();var o=a.$isEmpty(a.$viewValue),u=o?t():t(a.$viewValue,l),f,c,d,g,w;if(!u.isValid())return;if(e.type=="keydown")c=/38|107/.test(e.which);else{f=e.originalEvent?e.originalEvent.wheelDelta:e.wheelDelta;c=f/120>0}if(!!e.shiftKey)d=i[r(i,y.replace(/s$/,""))+1]||y;else d=y;if(o&&h)g=p.clone();else if(c){if(o&&!h)g=u.max(v?m:undefined);else if(h&&u.isBefore(p))g=p.clone();else if(v&&!u.isAfter(m))g=u.add(d,b).max(m);else if(!v)g=u.add(d,b)}else{if(o&&!v)g=u.min(h?p:undefined);else if(v&&u.isAfter(m))g=m.clone();else if(h&&!u.isBefore(p))g=u.subtract(d,b).min(p);else if(!h)g=u.subtract(d,b)}w=(g||u).format(l);s.$apply(function(){a.$setViewValue(w);a.$render()})};o.on("mousewheel keydown",D)}}}}])