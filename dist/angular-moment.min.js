/*
 Angular Moment.js v0.1.1
 (c) 2014 Shaun Grady https://github.com/shaungrady/angular-momentjs
 License: MIT
*/
"use strict";angular.module("angular-momentjs",[]).constant("indexOf",function(t,n){if(t.indexOf)return t.indexOf(n);for(var r=0;r<t.length;r++){if(n===t[r])return r}return-1}).provider("$moment",function(){function n(e){e=e||"";if(e.match(/l/i))return moment().lang()._longDateFormat[e]||e;return e}var t={$strict:true,$defaultViewFormat:"L",$defaultModelFormat:moment.defaultFormat,$parseFormat:n};this.defaultViewFormat=function(e){if(angular.isString(e))t.$defaultViewFormat=e;return this};this.defaultModelFormat=function(e){if(angular.isString(e))t.$defaultModelFormat=e;return this};this.strict=function(e){if(typeof e==="boolean")t.$strict=e;return this};this.$get=function(){if(angular.isDefined(moment.$strict))return moment;try{Object.defineProperty(moment,"$strict",{value:t.$strict});Object.defineProperty(moment,"$defaultViewFormat",{value:t.$defaultViewFormat});Object.defineProperty(moment,"$defaultModelFormat",{value:t.$defaultModelFormat});Object.defineProperty(moment,"$parseFormat",{value:t.$parseFormat})}catch(e){angular.extend(moment,t)}return moment}}).directive("input",["$moment","$timeout","indexOf",function(t,n,r){var i=["millisecond","second","minute","hour","day","month","year"];return{restrict:"E",require:"?ngModel",compile:function(s,o){if(o.type!=="date"&&o.type!=="moment")return angular.noop;return function(s,o,u,a){if(!a)return;var f=function(e){o.attr("placeholder",t.$parseFormat(e))},l=t.$defaultViewFormat,c=t.$defaultModelFormat,h,p,d,v,m,g,y,b;f(l);var w=function(){if(!a.$isEmpty(a.$viewValue))a.$setViewValue(a.$viewValue)};var E=function(){var e=a.$modelValue;n(function(){s.$apply(function(){s[u.ngModel]=e+" "});s.$apply(function(){s[u.ngModel]=e})})};var S=function(){if(h&&h.isValid()){p=t(h.format(l),l);d=t(h.format(c),c)}else p=d=null};var x=function(){if(v&&v.isValid()){m=t(v.format(l),l);g=t(v.format(c),c)}else m=g=null};var T=function(e,n,r){var i=t(r,e,t.$strict),s=a.$isEmpty(r);if(!s&&!i.isValid()){a.$setValidity("date",false);return undefined}else{a.$setValidity("date",true);return s?r:i.format(n)}};var N=function(e){return T(l,c,e)};var C=function(e){return T(c,l,e)};a.$formatters.push(C);if(u.format&&(!u.viewFormat||!u.modelFormat)){s.$watch(u.format,function(t){l=t;c=t;f(t);S();x();w()})}if(u.viewFormat){s.$watch(u.viewFormat,function(n,r){n=n||t.$defaultViewFormat;if(n===r)return;l=n;f(n);S();x();E()})}if(u.modelFormat){s.$watch(u.modelFormat,function(n,r){n=n||t.$defaultModelFormat;if(n===r)return;c=n;S();x();w()})}if(u.min){s.$watch(u.min,function(n){if(angular.isArray(n)&&n.length==2)h=t(n[0],n[1]);else if(n&&angular.isString(n))h=t(n,t.$defaultModelFormat);else h=null;S();w()},true);var k=function(e){var n=t(e,l,t.$strict);if(!a.$isEmpty(e)&&d&&n.isValid()&&n.isBefore(p)){a.$setValidity("min",false);return undefined}else{a.$setValidity("min",true);return e}};var L=function(e){var n=t(e,c,t.$strict);if(!a.$isEmpty(e)&&d&&n.isValid()&&n.isBefore(d)){a.$setValidity("min",false);return undefined}else{a.$setValidity("min",true);return e}};a.$parsers.push(k);a.$formatters.push(L)}if(u.max){s.$watch(u.max,function(n){if(angular.isArray(n)&&n.length==2)v=t(n[0],n[1]);else if(n&&angular.isString(n))v=t(n,t.$defaultModelFormat);else v=null;x();w()},true);var A=function(e){var n=t(e,l,t.$strict);if(!a.$isEmpty(e)&&g&&n.isValid()&&n.isAfter(m)){a.$setValidity("max",false);return undefined}else{a.$setValidity("max",true);return e}};var O=function(e){var n=t(e,c,t.$strict);if(!a.$isEmpty(e)&&g&&n.isValid()&&n.isAfter(g)){a.$setValidity("max",false);return undefined}else{a.$setValidity("max",true);return e}};a.$parsers.push(A);a.$formatters.push(O)}a.$parsers.push(N);y="day",b=1;if(u.step){s.$watch(u.step,function(t){if(!t||!angular.isString(t))return;var n=t.match(/(\d+)\s(\w+)/);if(n){y=n[2];b=parseInt(n[1],10)}else{y="day";b=1}})}var M=function(e,n){if(!e.type&&n&&n.type)angular.extend(e,n);if(e.type=="keydown"&&!/38|40|107|109/.test(e.which))return;e.preventDefault();var u=a.$isEmpty(a.$viewValue),f=u?t():t(a.$viewValue,l),c,d,g,w,E;if(!f.isValid())return;if(e.type=="keydown")d=/38|107/.test(e.which);else{c=e.originalEvent?e.originalEvent.wheelDelta:e.wheelDelta;d=c/120>0}if(!!e.shiftKey)g=i[r(i,y.replace(/s$/,""))+1]||y;else g=y;if(u&&h)w=p.clone();else if(d){if(u&&!h)w=f.max(v?m:undefined);else if(h&&f.isBefore(p))w=p.clone();else if(v&&!f.isAfter(m))w=f.add(g,b).max(m);else if(!v)w=f.add(g,b)}else{if(u&&!v)w=f.min(h?p:undefined);else if(v&&f.isAfter(m))w=m.clone();else if(h&&!f.isBefore(p))w=f.subtract(g,b).min(p);else if(!h)w=f.subtract(g,b)}E=(w||f).format(l);s.$apply(function(){o.val(E);a.$setViewValue(E)})};o.on("mousewheel keydown",M)}}}}])